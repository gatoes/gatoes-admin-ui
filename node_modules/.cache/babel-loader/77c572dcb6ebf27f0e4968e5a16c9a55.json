{"ast":null,"code":"import _defineProperty from \"/home/hardik/gatoes-admin-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport MemoryStorage from 'redux-persist-memory-storage';\nimport promise from \"redux-promise-middleware\";\nimport logger from \"redux-logger\";\nimport ReduxThunk from 'redux-thunk';\nimport axios from 'axios';\nimport storage from 'redux-persist/lib/storage';\nimport rootReducer from './reducers/index'; // the value from combineReducers\nimport { clearSession } from './utilities';\nimport { toast } from 'react-toastify';\nvar middleware = applyMiddleware(ReduxThunk, logger);\nvar persistConfig = {\n  key: 'root',\n  storage: new MemoryStorage()\n};\nvar pReducer = persistReducer(persistConfig, rootReducer);\nexport var store = createStore(pReducer, compose(middleware));\nexport var persistor = persistStore(store);\n\n//Send access token in every request\naxios.interceptors.request.use(function (config) {\n  var accessToken = window.localStorage.jwtToken || null; //new Date().getMilliseconds();\n  // if(typeof accessToken !== 'undefined' && accessToken !== null)\n  //   accessToken = {accessToken}; \n  var UTCOffset = new Date().getTimezoneOffset();\n  var language = window.localStorage.contentlanguage || 'en';\n  config.headers = _defineProperty(_defineProperty({\n    authorization: \"Bearer \".concat(accessToken),\n    utcoffset: UTCOffset,\n    devicetype: 'ANDROID'\n  }, \"ngrok-skip-browser-warning\", \"1\"), \"contentlanguage\", language);\n  if (window.globalPageLoader !== null) {\n    window.globalPageLoader.setState({\n      display: true\n    });\n  }\n  return config;\n}, function (error) {\n  if (window.globalPageLoader !== null) {\n    window.globalPageLoader.setState({\n      display: false\n    });\n  }\n  return Promise.reject(error);\n});\n\n// Add a response interceptor to check user session\naxios.interceptors.response.use(function (response) {\n  console.log('response', response);\n  if (window.globalPageLoader !== null) {\n    window.globalPageLoader.setState({\n      display: false\n    });\n  }\n  return response;\n}, function (error) {\n  if (window.globalPageLoader !== null) {\n    window.globalPageLoader.setState({\n      display: false\n    });\n  }\n  // If session is unauthorised, then logout the user.\n  if (typeof error.response !== 'undefined' && typeof error.response.status !== 'undefined') {\n    switch (error.response.status) {\n      case 401:\n        clearSession();\n        break;\n      case 400:\n        // Set form error toast here\n        toast.error(error.response.data.message);\n        //toast.error('Something wrong with your form fields value');\n        break;\n      default:\n        // Set \"Something went wrong\" global error toast here\n        toast.error('Something wrong, please try again');\n    }\n  }\n  // Do something with response error\n  return Promise.reject(error);\n});","map":{"version":3,"names":["createStore","applyMiddleware","compose","persistStore","persistReducer","MemoryStorage","promise","logger","ReduxThunk","axios","storage","rootReducer","clearSession","toast","middleware","persistConfig","key","pReducer","store","persistor","interceptors","request","use","config","accessToken","window","localStorage","jwtToken","UTCOffset","Date","getTimezoneOffset","language","contentlanguage","headers","_defineProperty","authorization","concat","utcoffset","devicetype","globalPageLoader","setState","display","error","Promise","reject","response","console","log","status","data","message"],"sources":["/home/hardik/gatoes-admin-ui/src/store.js"],"sourcesContent":["import { createStore, applyMiddleware, compose } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport MemoryStorage from 'redux-persist-memory-storage';\nimport promise from \"redux-promise-middleware\";\nimport logger from \"redux-logger\";\nimport ReduxThunk from 'redux-thunk';\nimport axios from 'axios';\nimport storage from 'redux-persist/lib/storage';\nimport rootReducer from './reducers/index'; // the value from combineReducers\nimport {clearSession} from './utilities';\nimport {toast} from 'react-toastify';\n\nconst middleware = applyMiddleware(ReduxThunk, logger);\n\nconst persistConfig = {\n\tkey: 'root',\n\tstorage: new MemoryStorage()\n};\n\nconst pReducer = persistReducer(persistConfig, rootReducer);\n\nexport const store = createStore(pReducer, compose(middleware));\nexport const persistor = persistStore(store);\n\n//Send access token in every request\naxios.interceptors.request.use(function (config) {\n\tconst accessToken = window.localStorage.jwtToken || null; //new Date().getMilliseconds();\n  // if(typeof accessToken !== 'undefined' && accessToken !== null)\n  //   accessToken = {accessToken}; \n  const UTCOffset = new Date().getTimezoneOffset();\n  const language = window.localStorage.contentlanguage || 'en';\n\tconfig.headers = { \n      authorization: `Bearer ${accessToken}`,\n      utcoffset: UTCOffset,\n      devicetype: 'ANDROID',\n      [\"ngrok-skip-browser-warning\"]:\"1\",\n      contentlanguage: language\n  };\n\n  if(window.globalPageLoader !== null){\n    window.globalPageLoader.setState({\n      display: true\n    });\n  }\n\n\treturn config;\n}, function (error) {\n  if(window.globalPageLoader !== null){\n    window.globalPageLoader.setState({\n      display: false\n    });\n  }\n\treturn Promise.reject(error);\n});\n\n// Add a response interceptor to check user session\naxios.interceptors.response.use(function (response) {\n\n  console.log('response', response);\n\n  if(window.globalPageLoader !== null){\n    window.globalPageLoader.setState({\n      display: false\n    });\n  }\n  return response;\n}, function (error) {\n  if(window.globalPageLoader !== null){\n    window.globalPageLoader.setState({\n      display: false\n    });\n  }\n\t// If session is unauthorised, then logout the user.\n  if(\n  \ttypeof error.response !== 'undefined' \n  \t&& typeof error.response.status !== 'undefined' \n  \t){\n    switch(error.response.status){\n      case 401:\n        clearSession();\n        break;\n      case 400:\n        // Set form error toast here\n        toast.error(error.response.data.message);\n        //toast.error('Something wrong with your form fields value');\n        break;\n      default:\n        // Set \"Something went wrong\" global error toast here\n        toast.error('Something wrong, please try again');\n    }\n  }\n  // Do something with response error\n  return Promise.reject(error);\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}